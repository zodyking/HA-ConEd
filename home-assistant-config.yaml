# Home Assistant Configuration Example
# Add this to your configuration.yaml or use MQTT Discovery

mqtt:
  sensor:
    # Account Balance Sensor
    - name: "ConEd Account Balance"
      state_topic: "coned/account_balance/state"
      json_attributes_topic: "coned/account_balance/attributes"
      availability_topic: "coned/account_balance/availability"
      unit_of_measurement: "$"
      device_class: "monetary"
      state_class: "measurement"
      value_template: "{{ value | float }}"
      unique_id: "coned_account_balance"
      
    # Most Recent Bill Sensor
    - name: "ConEd Most Recent Bill"
      state_topic: "coned/most_recent_bill/state"
      json_attributes_topic: "coned/most_recent_bill/attributes"
      availability_topic: "coned/most_recent_bill/availability"
      unit_of_measurement: "$"
      device_class: "monetary"
      state_class: "measurement"
      value_template: "{{ value | float }}"
      unique_id: "coned_most_recent_bill"
      
    # Previous Bill Sensor
    - name: "ConEd Previous Bill"
      state_topic: "coned/previous_bill/state"
      json_attributes_topic: "coned/previous_bill/attributes"
      availability_topic: "coned/previous_bill/availability"
      unit_of_measurement: "$"
      device_class: "monetary"
      state_class: "measurement"
      value_template: "{{ value | float }}"
      unique_id: "coned_previous_bill"
      
    # Last Payment Sensor
    - name: "ConEd Last Payment"
      state_topic: "coned/last_payment/state"
      json_attributes_topic: "coned/last_payment/attributes"
      availability_topic: "coned/last_payment/availability"
      unit_of_measurement: "$"
      device_class: "monetary"
      state_class: "measurement"
      value_template: "{{ value | float }}"
      unique_id: "coned_last_payment"

# Example Automation
# automation:
#   - alias: "ConEd Account Balance Changed"
#     trigger:
#       - platform: state
#         entity_id: sensor.coned_account_balance
#     action:
#       - service: notify.mobile_app
#         data:
#           message: "ConEd account balance changed to {{ states('sensor.coned_account_balance') }}"
#           
#   - alias: "New ConEd Bill Received"
#     trigger:
#       - platform: state
#         entity_id: sensor.coned_most_recent_bill
#     action:
#       - service: notify.mobile_app
#         data:
#           message: "New ConEd bill received: {{ states('sensor.coned_most_recent_bill') }}"
#           
#   - alias: "ConEd Payment Received"
#     trigger:
#       - platform: state
#         entity_id: sensor.coned_last_payment
#     action:
#       - service: notify.mobile_app
#         data:
#           message: "ConEd payment received: {{ states('sensor.coned_last_payment') }}"

